{#{% extends 'base/base.html' %}#}
{#{% load static %}#}
{#{% load humanize %}#}
{##}
{#{% block content %}#}
{##}
{#<style>#}
{#.content-wrapper {#}
{#    margin-left: 0;#}
{#    padding: 40px;#}
{##}
{#}#}
{##}
{#.container-fluid {#}
{#    max-width: 1500px;#}
{#    margin: 0 auto;#}
{#    padding: 0 15px;#}
{#}#}
{##}
{#.card {#}
{#    margin-bottom: 20px;#}
{#    box-shadow: 0 2px 4px rgba(0,0,0,0.1);#}
{#}#}
{##}
{#.statistics-cards .card {#}
{#    transition: transform 0.2s;#}
{#}#}
{##}
{#.statistics-cards .card:hover {#}
{#    transform: translateY(-3px);#}
{#}#}
{##}
{#@media (max-width: 768px) {#}
{#    .content-wrapper {#}
{#        padding: 10px;#}
{#    }#}
{##}
{#    .col-lg-4, .col-lg-8 {#}
{#        padding: 0 10px;#}
{#    }#}
{#}#}
{#</style>#}
{#<div class="content-wrapper">#}
{#    <div class="container-fluid">#}
{#        <!-- Page Title -->#}
{#        <div class="row mt-3">#}
{#            <div class="col-12">#}
{#                <div class="card">#}
{#                    <div class="card-body">#}
{#                        <h4 class="card-title">Profile Settings</h4>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{##}
{#        <div class="row mt-3">#}
{#            <!-- Profile Card -->#}
{#            <div class="col-lg-4">#}
{#                <div class="card">#}
{#                    <div class="card-body">#}
{#                        <div class="text-center">#}
{#                            <div class="profile-pic mb-4">#}
{#                                {% if user.profile_image %}#}
{#                                    <img src="{{ user.profile_image.url }}" class="rounded-circle" width="150" height="150">#}
{#                                {% else %}#}
{#                                    <img src="{% static 'images/default-avatar.png' %}" class="rounded-circle" width="150" height="150">#}
{#                                {% endif %}#}
{#                                <div class="mt-3">#}
{#                                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#updateProfilePicModal">#}
{#                                        <i class="fa fa-camera"></i> Change Photo#}
{#                                    </button>#}
{#                                </div>#}
{#                            </div>#}
{#                            <h5 class="mb-0">{{ user_full_name }}</h5>#}
{#                            <p class="text-muted mb-3">{{ user.email }}</p>#}
{##}
{#                            <!-- Statistics Cards -->#}
{#                            <div class="row text-center mt-4">#}
{#                                <div class="col-4">#}
{#                                    <div class="card">#}
{#                                        <div class="card-body py-3">#}
{#                                            <h3 class="mb-0">{{ observations_count }}</h3>#}
{#                                            <p class="small text-muted mb-0">Observations</p>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                                <div class="col-4">#}
{#                                    <div class="card">#}
{#                                        <div class="card-body py-3">#}
{#                                            <h3 class="mb-0">{{ comments_count }}</h3>#}
{#                                            <p class="small text-muted mb-0">Comments</p>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                                <div class="col-4">#}
{#                                    <div class="card">#}
{#                                        <div class="card-body py-3">#}
{#                                            <h3 class="mb-0">{{ tasks_count }}</h3>#}
{#                                            <p class="small text-muted mb-0">Tasks</p>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <!-- Settings Tabs -->#}
{#            <div class="col-lg-8">#}
{#                <div class="card">#}
{#                    <div class="card-body">#}
{#                        <ul class="nav nav-tabs" role="tablist">#}
{#                            <li class="nav-item">#}
{#                                <a class="nav-link active" data-toggle="tab" href="#profile-info">#}
{#                                    <i class="fa fa-user mr-2"></i>Basic Info#}
{#                                </a>#}
{#                            </li>#}
{#                            <li class="nav-item">#}
{#                                <a class="nav-link" data-toggle="tab" href="#preferences">#}
{#                                    <i class="fa fa-cog mr-2"></i>Preferences#}
{#                                </a>#}
{#                            </li>#}
{#                            <li class="nav-item">#}
{#                                <a class="nav-link" data-toggle="tab" href="#security">#}
{#                                    <i class="fa fa-lock mr-2"></i>Security#}
{#                                </a>#}
{#                            </li>#}
{#                        </ul>#}
{##}
{#                        <div class="tab-content mt-4">#}
{#                            <!-- Basic Info Tab -->#}
{#                            <div class="tab-pane fade show active" id="profile-info">#}
{#                                <form action="{% url 'update_profile' %}" method="post">#}
{#                                    {% csrf_token %}#}
{#                                    <div class="form-group">#}
{#                                        <label>First Name</label>#}
{#                                        <input type="text" class="form-control" name="first_name" value="{{ user.first_name }}">#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Last Name</label>#}
{#                                        <input type="text" class="form-control" name="last_name" value="{{ user.last_name }}">#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Email</label>#}
{#                                        <input type="email" class="form-control" value="{{ user.email }}" readonly>#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Phone Number</label>#}
{#                                        <input type="tel" class="form-control" name="phone" value="{{ user.profile.phone|default:'' }}">#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Bio</label>#}
{#                                        <textarea class="form-control" name="bio" rows="4">{{ user.profile.bio|default:'' }}</textarea>#}
{#                                    </div>#}
{#                                    <button type="submit" class="btn btn-primary">Save Changes</button>#}
{#                                </form>#}
{#                            </div>#}
{##}
{#                            <!-- Preferences Tab -->#}
{#                            <div class="tab-pane fade" id="preferences">#}
{#                                <form action="{% url 'update_settings' %}" method="post">#}
{#                                    {% csrf_token %}#}
{#                                    <div class="form-group">#}
{#                                        <label>Time Zone</label>#}
{#                                        <select class="form-control" name="timezone">#}
{#                                            {% for tz in timezones %}#}
{#                                                <option value="{{ tz }}" {% if user.profile.timezone == tz %}selected{% endif %}>{{ tz }}</option>#}
{#                                            {% endfor %}#}
{#                                        </select>#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Language</label>#}
{#                                        <select class="form-control" name="language">#}
{#                                            {% for code, name in languages %}#}
{#                                                <option value="{{ code }}" {% if user.profile.language == code %}selected{% endif %}>{{ name }}</option>#}
{#                                            {% endfor %}#}
{#                                        </select>#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label class="d-block">Notification Settings</label>#}
{#                                        <div class="custom-control custom-switch">#}
{#                                            <input type="checkbox" class="custom-control-input" id="emailNotif" name="email_notifications"#}
{#                                                {% if user.profile.email_notifications %}checked{% endif %}>#}
{#                                            <label class="custom-control-label" for="emailNotif">Email Notifications</label>#}
{#                                        </div>#}
{#                                        <div class="custom-control custom-switch mt-2">#}
{#                                            <input type="checkbox" class="custom-control-input" id="pushNotif" name="push_notifications"#}
{#                                                {% if user.profile.push_notifications %}checked{% endif %}>#}
{#                                            <label class="custom-control-label" for="pushNotif">Push Notifications</label>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                    <button type="submit" class="btn btn-primary">Save Preferences</button>#}
{#                                </form>#}
{#                            </div>#}
{##}
{#                            <!-- Security Tab -->#}
{#                            <div class="tab-pane fade" id="security">#}
{#                                <form action="{% url 'change_password' %}" method="post">#}
{#                                    {% csrf_token %}#}
{#                                    <div class="form-group">#}
{#                                        <label>Current Password</label>#}
{#                                        <input type="password" class="form-control" name="current_password" required>#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>New Password</label>#}
{#                                        <input type="password" class="form-control" name="new_password" required>#}
{#                                    </div>#}
{#                                    <div class="form-group">#}
{#                                        <label>Confirm New Password</label>#}
{#                                        <input type="password" class="form-control" name="confirm_password" required>#}
{#                                    </div>#}
{#                                    <button type="submit" class="btn btn-primary">Change Password</button>#}
{#                                </form>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#</div>#}
{##}
{#<!-- Profile Picture Update Modal -->#}
{#<div class="modal fade" id="updateProfilePicModal" tabindex="-1" role="dialog" aria-hidden="true">#}
{#    <div class="modal-dialog" role="document">#}
{#        <div class="modal-content">#}
{#            <div class="modal-header">#}
{#                <h5 class="modal-title">Update Profile Picture</h5>#}
{#                <button type="button" class="close" data-dismiss="modal">#}
{#                    <span aria-hidden="true">&times;</span>#}
{#                </button>#}
{#            </div>#}
{#            <form action="{% url 'update_avatar' %}" method="post" enctype="multipart/form-data">#}
{#                {% csrf_token %}#}
{#                <div class="modal-body">#}
{#                    <div class="form-group">#}
{#                        <label>Choose Image</label>#}
{#                        <input type="file" class="form-control-file" name="avatar" accept="image/*" required>#}
{#                        <small class="form-text text-muted">Recommended size: 150x150 pixels</small>#}
{#                    </div>#}
{#                </div>#}
{#                <div class="modal-footer">#}
{#                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>#}
{#                    <button type="submit" class="btn btn-primary">Upload</button>#}
{#                </div>#}
{#            </form>#}
{#        </div>#}
{#    </div>#}
{#</div>#}
{##}
{#{% block extra_js %}#}
{#<script>#}
{#$(document).ready(function() {#}
{#    // Show selected image preview#}
{#    $('input[name="avatar"]').change(function() {#}
{#        if (this.files && this.files[0]) {#}
{#            var reader = new FileReader();#}
{#            reader.onload = function(e) {#}
{#                $('.profile-pic img').attr('src', e.target.result);#}
{#            }#}
{#            reader.readAsDataURL(this.files[0]);#}
{#        }#}
{#    });#}
{##}
{#    // Password confirmation validation#}
{#    $('form[action="{% url "change_password" %}"]').on('submit', function(e) {#}
{#        var newPass = $('input[name="new_password"]').val();#}
{#        var confirmPass = $('input[name="confirm_password"]').val();#}
{##}
{#        if (newPass !== confirmPass) {#}
{#            e.preventDefault();#}
{#            alert('New passwords do not match!');#}
{#        }#}
{#    });#}
{#});#}
{#</script>#}
{#{% endblock %}#}
{#{% endblock %}#}










{% extends 'base/base.html' %}
{% load static %}

{% block title %}SHE TOUR Dashboard{% endblock %}

{% block content %}
<style>


.modal-content {
    background-color: #2c2c2c;
    color: #fff;
    border-radius: 5px;
}

.modal-header {
    border-bottom: 1px solid #404040;
    padding: 1rem;
}

.modal-header .btn-close {
    color: #fff;
    background: none;
    border: none;
    font-size: 1.5rem;
    padding: 0;
    margin: 0;
    opacity: 0.8;
}

.modal-header .btn-close:hover {
    opacity: 1;
}

.modal-footer {
    border-top: 1px solid #404040;
    padding: 1rem;
}

.table {
    color: #fff;
    margin-bottom: 0;
}

.table-striped tbody tr:nth-of-type(odd) {
    background-color: rgba(255,255,255,0.05);
}

.badge {
    padding: 0.5rem 0.75rem;
    border-radius: 4px;
}

.badge.bg-warning {
    background-color: #ffc107 !important;
    color: #000;
}

.badge.bg-success {
    background-color: #28a745 !important;
}

.badge.bg-primary {
    background-color: #007bff !important;
}

/* Modal transition animations */
.modal.fade .modal-dialog {
    transition: transform .3s ease-out;
}

.modal.fade.show .modal-dialog {
    transform: none;
}

/* Close button positioning */
.modal-header .btn-close {
    position: absolute;
    right: 1rem;
    top: 1rem;
}

/* Pagination styles */
.pagination {
    margin-top: 1rem;
    justify-content: center;
}

.pagination .page-link {
    background-color: #404040;
    border-color: #2c2c2c;
    color: #fff;
}

.pagination .page-link:hover {
    background-color: #505050;
}

/* Per page selector */
.per-page-select {
    background-color: #404040;
    color: #fff;
    border: 1px solid #2c2c2c;
    border-radius: 4px;
    padding: 0.375rem 0.75rem;
}

/* Modal table scrolling */
.modal-body {
    max-height: 60vh;
    overflow-y: auto;
}

.modal-body table {
    margin-top: 10px;
}

/* Search bar styling */
.modal-search {
    position: sticky;
    top: 0;
    background-color: #2c2c2c;
    padding: 10px 0;
    z-index: 1;
}

.search-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #404040;
    border-radius: 4px;
    background-color: #363636;
    color: #fff;
    margin-bottom: 10px;
}

.search-input:focus {
    outline: none;
    border-color: #007bff;
}

.search-input::placeholder {
    color: #aaa;
}
</style>

<!--Start Dashboard Content-->
<div class="row">
    <div class="col-12 col-lg-6 col-xl-6">
        <div class="card">
            <div class="card-header">Profile Settings

            </div>
            <div class="card-body">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#profile-info">
                            <i class="fa fa-user mr-2"></i>Basic Info
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="{% url 'notification_preferences' %}">
                            <i class="fa fa-cog mr-2"></i>Preferences
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#security">
                            <i class="fa fa-lock mr-2"></i>Security
                        </a>
                    </li>
                </ul>
                <div class="tab-content mt-4">
                                <!-- Basic Info Tab -->
                    <div class="tab-pane fade show active" id="profile-info">
                        <form action="{% url 'update_profile' %}" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" class="form-control" name="first_name" value="{{ user.first_name }}">
                            </div>
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" class="form-control" name="last_name" value="{{ user.last_name }}">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" class="form-control" value="{{ user.email }}" readonly>
                            </div>
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" class="form-control" name="phone" value="{{ user.profile.phone|default:'' }}">
                            </div>
                            <div class="form-group">
                                <label>Bio</label>
                                <textarea class="form-control" name="bio" rows="4">{{ user.profile.bio|default:'' }}</textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>
                    <!-- Preferences Tab -->
                    <div class="tab-pane fade" id="preferences">
                        <form action="{% url 'update_settings' %}" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label>Time Zone</label>
                                <select class="form-control" name="timezone">
                                    {% for tz in timezones %}
                                        <option value="{{ tz }}" {% if user.profile.timezone == tz %}selected{% endif %}>{{ tz }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Language</label>
                                <select class="form-control" name="language">
                                    {% for code, name in languages %}
                                        <option value="{{ code }}" {% if user.profile.language == code %}selected{% endif %}>{{ name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="d-block">Notification Settings</label>
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" id="emailNotif" name="email_notifications"
                                           {% if user.profile.email_notifications %}checked{% endif %}>
                                    <label class="custom-control-label" for="emailNotif">Email Notifications</label>
                                </div>
                                <div class="custom-control custom-switch mt-2">
                                    <input type="checkbox" class="custom-control-input" id="pushNotif" name="push_notifications"
                                           {% if user.profile.push_notifications %}checked{% endif %}>
                                    <label class="custom-control-label" for="pushNotif">Push Notifications</label>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Preferences</button>
                        </form>
                    </div>
                    <!-- Security Tab -->
                    <div class="tab-pane fade" id="security">
                        <form action="{% url 'change_password' %}" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password" class="form-control" name="current_password" required>
                            </div>
                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password" class="form-control" name="new_password" required>
                            </div>
                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <input type="password" class="form-control" name="confirm_password" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-lg-6 col-xl-6">
        <div class="card">
            <div class="card-header">Profile
                <div class="card-action">

                </div>
            </div>
            <div class="card-body">
                <div class="chart-container-2" style="position: relative; height: 500px;">
                <div class="card">
                    <div class="card-body">
                        <div class="text-center">
                            <div class="profile-pic mb-4">
                                {% if user.profile_image %}
                                    <img src="{{ user.profile_image.url }}" class="rounded-circle" width="150" height="150">
                                {% else %}
                                    <img src="{% static 'images/default-avatar.png' %}" class="rounded-circle" width="150" height="150">
                                {% endif %}
                                <div class="mt-3">
                                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#updateProfilePicModal">
                                        <i class="fa fa-camera"></i> Change Photo
                                    </button>
                                </div>
                            </div>
                            <h5 class="mb-0">{{ user_full_name }}</h5>
                            <p class="text-muted mb-3">{{ user.email }}</p>

                            <!-- Statistics Cards -->
                            <div class="row text-center mt-4">
                                <div class="col-4">
                                    <div class="card">
                                        <div class="card-body py-3">
                                            <h3 class="mb-0">{{ observations_count }}</h3>
                                            <p class="small text-muted mb-0">Observations</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <div class="card-body py-3">
                                            <h3 class="mb-0">{{ comments_count }}</h3>
                                            <p class="small text-muted mb-0">Comments</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="card">
                                        <div class="card-body py-3">
                                            <h3 class="mb-0">{{ tasks_count }}</h3>
                                            <p class="small text-muted mb-0">Tasks</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                </div>
            </div>
        </div>
    </div>
</div>

    {% block extra_js %}
<script>
$(document).ready(function() {
    // Show selected image preview
    $('input[name="avatar"]').change(function() {
        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('.profile-pic img').attr('src', e.target.result);
            }
            reader.readAsDataURL(this.files[0]);
        }
    });

    // Password confirmation validation
    $('form[action="{% url "change_password" %}"]').on('submit', function(e) {
        var newPass = $('input[name="new_password"]').val();
        var confirmPass = $('input[name="confirm_password"]').val();

        if (newPass !== confirmPass) {
            e.preventDefault();
            alert('New passwords do not match!');
        }
    });
});
</script>
{% endblock %}
{% endblock %}



